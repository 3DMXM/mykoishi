{
  "version": 3,
  "sources": ["../../../node_modules/@koishijs/client/client/data.ts", "../../../node_modules/marked-vue/src/index.ts", "../../../node_modules/@koishijs/client/client/components/common/index.ts", "../../../node_modules/@koishijs/client/client/components/index.ts", "../../../node_modules/@koishijs/client/client/components/icons/index.ts", "../../../node_modules/@koishijs/client/client/components/layout/index.ts", "../../../node_modules/cordis/src/context.ts", "../../../node_modules/cordis/src/events.ts", "../../../node_modules/cordis/src/registry.ts", "../../../node_modules/cordis/src/scope.ts", "../../../node_modules/cordis/src/utils.ts", "../../../node_modules/cordis/src/service.ts", "../../../node_modules/@koishijs/client/client/activity.ts", "../../../node_modules/@koishijs/client/client/config.ts", "../../../node_modules/@koishijs/client/client/loader.ts", "../../../node_modules/@koishijs/client/client/context.ts", "../../../node_modules/@koishijs/client/client/components/link.ts", "../../../node_modules/@koishijs/client/client/components/slot.ts", "../../../node_modules/@koishijs/client/client/index.ts", "../../../node_modules/@satorijs/protocol/src/index.ts", "../../../node_modules/@koishijs/client/client/utils.ts"],
  "sourcesContent": ["import type { ClientConfig, Console, DataService, Events } from '@koishijs/plugin-console'\nimport type { Promisify, Universal } from 'koishi'\nimport { markRaw, reactive, ref } from 'vue'\n\nexport type Store = {\n  [K in keyof Console.Services]?: Console.Services[K] extends DataService<infer T> ? T : never\n}\n\ndeclare const KOISHI_CONFIG: ClientConfig\nexport const global = KOISHI_CONFIG\nexport const store = reactive<Store>({})\n\nexport const socket = ref<Universal.WebSocket>(null)\nconst listeners: Record<string, (data: any) => void> = {}\nconst responseHooks: Record<string, [Function, Function]> = {}\n\nexport function send<T extends keyof Events>(type: T, ...args: Parameters<Events[T]>): Promisify<ReturnType<Events[T]>>\nexport function send(type: string, ...args: any[]) {\n  if (!socket.value) return\n  console.debug('↑%c', 'color:brown', type, args)\n  const id = Math.random().toString(36).slice(2, 9)\n  socket.value.send(JSON.stringify({ id, type, args }))\n  return new Promise((resolve, reject) => {\n    responseHooks[id] = [resolve, reject]\n    setTimeout(() => {\n      delete responseHooks[id]\n      reject(new Error('timeout'))\n    }, 60000)\n  })\n}\n\nexport function receive<T = any>(event: string, listener: (data: T) => void) {\n  listeners[event] = listener\n}\n\nreceive('data', ({ key, value }) => {\n  store[key] = value\n})\n\nreceive('patch', ({ key, value }) => {\n  if (Array.isArray(store[key])) {\n    store[key].push(...value)\n  } else if (store[key]) {\n    Object.assign(store[key], value)\n  }\n})\n\nreceive('response', ({ id, value, error }) => {\n  if (!responseHooks[id]) return\n  const [resolve, reject] = responseHooks[id]\n  delete responseHooks[id]\n  if (error) {\n    reject(error)\n  } else {\n    resolve(value)\n  }\n})\n\nexport function connect(callback: () => Universal.WebSocket) {\n  const value = callback()\n\n  let sendTimer: number\n  let closeTimer: number\n  const refresh = () => {\n    if (!global.heartbeat) return\n    clearTimeout(sendTimer)\n    clearTimeout(closeTimer)\n    sendTimer = +setTimeout(() => send('ping'), global.heartbeat.interval)\n    closeTimer = +setTimeout(() => value?.close(), global.heartbeat.timeout)\n  }\n\n  const reconnect = () => {\n    socket.value = null\n    for (const key in store) {\n      store[key] = undefined\n    }\n    console.log('[koishi] websocket disconnected, will retry in 1s...')\n    setTimeout(() => {\n      connect(callback).then(location.reload, () => {\n        console.log('[koishi] websocket disconnected, will retry in 1s...')\n      })\n    }, 1000)\n  }\n\n  value.addEventListener('message', (ev) => {\n    refresh()\n    const data = JSON.parse(ev.data)\n    console.debug('↓%c', 'color:purple', data.type, data.body)\n    if (data.type in listeners) {\n      listeners[data.type](data.body)\n    }\n  })\n\n  value.addEventListener('close', reconnect)\n\n  return new Promise<Universal.WebSocket.Event>((resolve, reject) => {\n    value.addEventListener('open', (event) => {\n      socket.value = markRaw(value)\n      resolve(event)\n    })\n    value.addEventListener('error', reject)\n  })\n}\n", "import { defineComponent, h } from 'vue'\nimport { marked } from 'marked'\nimport * as xss from 'xss'\n\n// Sections derived from MDN element categories and limited to the more\n// benign categories.\n// https://developer.mozilla.org/en-US/docs/Web/HTML/Element\nconst allowedTags = [\n  // Content sectioning\n  'address', 'article', 'aside', 'footer', 'header',\n  'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'hgroup',\n  'main', 'nav', 'section',\n  // Text content\n  'blockquote', 'dd', 'div', 'dl', 'dt', 'figcaption', 'figure',\n  'hr', 'li', 'main', 'ol', 'p', 'pre', 'ul',\n  // Inline text semantics\n  'a', 'abbr', 'b', 'bdi', 'bdo', 'br', 'cite', 'code', 'data', 'dfn',\n  'em', 'i', 'kbd', 'mark', 'q',\n  'rb', 'rp', 'rt', 'rtc', 'ruby',\n  's', 'samp', 'small', 'span', 'strong', 'sub', 'sup', 'time', 'u', 'var', 'wbr',\n  // Table content\n  'caption', 'col', 'colgroup', 'table', 'tbody', 'td', 'tfoot', 'th',\n  'thead', 'tr',\n]\n\nconst voidTags = ['img', 'br', 'hr', 'area', 'base', 'basefont', 'input', 'link', 'meta']\n\nconst allowedProtocols = ['http:', 'https:', 'mailto:', 'tel:']\n\nfunction checkUrl(value: string) {\n  try {\n    const url = new URL(value, location.toString())\n    return allowedProtocols.includes(url.protocol)\n  } catch (e) {\n    return false\n  }\n}\n\nexport function sanitize(html: string) {\n  const whiteList: XSS.IWhiteList = {\n    ...Object.fromEntries(allowedTags.map(tag => [tag, []])),\n  }\n  const stack: string[] = []\n  html = xss.filterXSS(html, {\n    whiteList,\n    stripIgnoreTag: true,\n    onTag(tag, raw, options) {\n      let html: string | undefined\n      if (tag === 'a' && !options.isClosing) {\n        const attrs: any = {}\n        xss.parseAttr(raw.slice(3), (name, value) => {\n          if (name === 'href') {\n            attrs[name] = checkUrl(value) ? value : '#'\n          } else if (name === 'title') {\n            attrs[name] = xss.escapeAttrValue(value)\n          }\n          return ''\n        })\n        attrs.rel = 'noopener noreferrer'\n        attrs.target = '_blank'\n        html = `<a ${Object.entries(attrs).map(([name, value]) => `${name}=\"${value}\"`).join(' ')}>`\n      }\n      if (raw.endsWith('/>') || voidTags.includes(tag)) return\n      if (!options.isClosing) {\n        stack.push(tag)\n        return html\n      }\n      let result = ''\n      while (stack.length) {\n        const last = stack.pop()\n        if (last === tag) {\n          return result + raw\n        }\n        result += `</${last}>`\n      }\n      return raw.replace(/</g, '&lt;').replace(/>/g, '&gt;')\n    },\n  })\n  while (stack.length) {\n    const last = stack.pop()\n    html += `</${last}>`\n  }\n  return html\n}\n\nexport default defineComponent({\n  props: {\n    source: String,\n    inline: Boolean,\n    tag: String,\n    unsafe: Boolean,\n  },\n  setup(props) {\n    return () => {\n      let html = props.inline\n        ? marked.parseInline(props.source || '')\n        : marked.parse(props.source || '')\n      if (!props.unsafe) html = sanitize(html)\n      const tag = props.tag || (props.inline ? 'span' : 'div')\n      return h(tag, {\n        class: 'markdown',\n        innerHTML: html,\n      })\n    }\n  },\n})\n", "import { App } from 'vue'\nimport Button from './k-button.vue'\nimport Hint from './k-hint.vue'\nimport Tab from './k-tab.vue'\n\nexport default function (app: App) {\n  app.component('k-button', Button)\n  app.component('k-hint', Hint)\n  app.component('k-tab', Tab)\n}\n", "import { App } from 'vue'\nimport Markdown from 'marked-vue'\nimport components, { SchemaBase } from '@koishijs/components'\nimport Element, { ElLoading, ElMessage, ElMessageBox } from 'element-plus'\n\nimport common from './common'\nimport Dynamic from './dynamic.vue'\nimport ChatImage from './chat/image.vue'\nimport * as icons from './icons'\nimport layout from './layout'\nimport link from './link'\nimport slot from './slot'\n\nimport 'element-plus/dist/index.css'\n\nexport const loading = ElLoading.service\nexport const message = ElMessage\nexport const messageBox = ElMessageBox\n\nexport * from './common'\nexport * from './layout'\nexport * from './link'\nexport * from './slot'\n\nexport * from 'vue-i18n'\nexport * from '@koishijs/components'\n\nexport { icons, ChatImage }\n\nSchemaBase.extensions.add({\n  type: 'any',\n  role: 'dynamic',\n  component: Dynamic,\n})\n\nexport default function (app: App) {\n  app.use(Element)\n  app.component('k-markdown', Markdown)\n\n  app.use(common)\n  app.use(components)\n  app.use(icons)\n  app.use(layout)\n  app.use(link)\n  app.use(slot)\n}\n", "import { App, Component, defineComponent, h, markRaw, reactive } from 'vue'\nimport * as components from '@koishijs/components'\nimport Default from './activity/default.vue'\nimport Ellipsis from './activity/ellipsis.vue'\nimport Home from './activity/home.vue'\nimport Moon from './activity/moon.vue'\nimport Settings from './activity/settings.vue'\nimport Sun from './activity/sun.vue'\nimport ArrowLeft from './svg/arrow-left.vue'\nimport ArrowRight from './svg/arrow-right.vue'\nimport BoxOpen from './svg/box-open.vue'\nimport CheckFull from './svg/check-full.vue'\nimport ChevronDown from './svg/chevron-down.vue'\nimport ChevronLeft from './svg/chevron-left.vue'\nimport ChevronRight from './svg/chevron-right.vue'\nimport ChevronUp from './svg/chevron-up.vue'\nimport ClipboardList from './svg/clipboard-list.vue'\nimport Edit from './svg/edit.vue'\nimport ExclamationFull from './svg/exclamation-full.vue'\nimport Expand from './svg/expand.vue'\nimport FileArchive from './svg/file-archive.vue'\nimport Filter from './svg/filter.vue'\nimport GitHub from './svg/github.vue'\nimport GitLab from './svg/gitlab.vue'\nimport InfoFull from './svg/info-full.vue'\nimport Koishi from './svg/koishi.vue'\nimport Link from './svg/link.vue'\nimport PaperPlane from './svg/paper-plane.vue'\nimport QuestionEmpty from './svg/question-empty.vue'\nimport Redo from './svg/redo.vue'\nimport Search from './svg/search.vue'\nimport SearchMinus from './svg/search-minus.vue'\nimport SearchPlus from './svg/search-plus.vue'\nimport StarEmpty from './svg/star-empty.vue'\nimport StarFull from './svg/star-full.vue'\nimport Start from './svg/start.vue'\nimport Tag from './svg/tag.vue'\nimport TimesFull from './svg/times-full.vue'\nimport Tools from './svg/tools.vue'\nimport Undo from './svg/undo.vue'\nimport User from './svg/user.vue'\n\nimport './style.scss'\n\nconst registry: Record<string, Component> = reactive({})\n\nregister('activity:default', Default)\nregister('activity:ellipsis', Ellipsis)\nregister('activity:home', Home)\nregister('activity:moon', Moon)\nregister('activity:settings', Settings)\nregister('activity:sun', Sun)\n\nregister('arrow-up', components.IconArrowUp)\nregister('arrow-down', components.IconArrowDown)\nregister('arrow-left', ArrowLeft)\nregister('arrow-right', ArrowRight)\nregister('box-open', BoxOpen)\nregister('check-full', CheckFull)\nregister('chevron-down', ChevronDown)\nregister('chevron-left', ChevronLeft)\nregister('chevron-right', ChevronRight)\nregister('chevron-up', ChevronUp)\nregister('clipboard-list', ClipboardList)\nregister('close', components.IconClose)\nregister('delete', components.IconDelete)\nregister('edit', Edit)\nregister('exclamation-full', ExclamationFull)\nregister('expand', Expand)\nregister('external', components.IconExternal)\nregister('eye-slash', components.IconEyeSlash)\nregister('eye', components.IconEye)\nregister('file-archive', FileArchive)\nregister('filter', Filter)\nregister('github', GitHub)\nregister('gitlab', GitLab)\nregister('info-full', InfoFull)\nregister('koishi', Koishi)\nregister('link', Link)\nregister('paper-plane', PaperPlane)\nregister('question-empty', QuestionEmpty)\nregister('redo', Redo)\nregister('search', Search)\nregister('search-minus', SearchMinus)\nregister('search-plus', SearchPlus)\nregister('star-empty', StarEmpty)\nregister('star-full', StarFull)\nregister('start', Start)\nregister('tag', Tag)\nregister('times-full', TimesFull)\nregister('tools', Tools)\nregister('undo', Undo)\nregister('user', User)\n\nexport function register(name: string, component: Component) {\n  registry[name] = markRaw(component)\n}\n\nexport function install(app: App) {\n  app.component('k-icon', defineComponent({\n    props: {\n      name: String,\n    },\n    render(props) {\n      const component = registry[props.name]\n      return component && h(component)\n    },\n  }))\n}\n", "import { App } from 'vue'\nimport CardNumeric from './card-numeric.vue'\nimport Card from './card.vue'\nimport Content from './content.vue'\nimport Empty from './empty.vue'\nimport TabGroup from './tab-group.vue'\nimport TabItem from './tab-item.vue'\n\nexport default function (app: App) {\n  app.component('k-numeric', CardNumeric)\n  app.component('k-card', Card)\n  app.component('k-content', Content)\n  app.component('k-empty', Empty)\n  app.component('k-tab-group', TabGroup)\n  app.component('k-tab-item', TabItem)\n}\n", "import { defineProperty, isNullable } from 'cosmokit'\nimport { Lifecycle } from './events'\nimport { Registry } from './registry'\nimport { getConstructor, isConstructor, isUnproxyable, resolveConfig } from './utils'\n\nexport namespace Context {\n  export type Parameterized<C, T = any> = Omit<C, 'config'> & { config: T }\n\n  export interface Config extends Lifecycle.Config, Registry.Config {}\n\n  /** @deprecated use `string[]` instead */\n  export interface MixinOptions {\n    methods?: string[]\n    accessors?: string[]\n    prototype?: {}\n  }\n\n  export type Internal = Internal.Service | Internal.Mixin\n\n  export namespace Internal {\n    export interface Service {\n      type: 'service'\n      key: symbol\n      builtin?: boolean\n      prototype?: {}\n    }\n\n    export interface Mixin {\n      type: 'mixin'\n      service: string\n    }\n  }\n}\n\nexport interface Context<T = any> {\n  [Context.config]: Context.Config\n  [Context.shadow]: Record<string | symbol, symbol>\n  [Context.internal]: Record<keyof any, Context.Internal>\n  root: Context.Parameterized<this, this[typeof Context.config]>\n  realms: Record<string, Record<string, symbol>>\n  lifecycle: Lifecycle\n  registry: Registry<this>\n  config: T\n}\n\nexport class Context {\n  static readonly config = Symbol.for('cordis.config')\n  static readonly events = Symbol.for('cordis.events')\n  static readonly static = Symbol.for('cordis.static')\n  static readonly filter = Symbol.for('cordis.filter')\n  static readonly source = Symbol.for('cordis.source')\n  static readonly expose = Symbol.for('cordis.expose')\n  static readonly shadow = Symbol.for('cordis.shadow')\n  static readonly current = Symbol.for('cordis.current')\n  static readonly internal = Symbol.for('cordis.internal')\n\n  private static ensureInternal(): Context[typeof Context.internal] {\n    const ctx = this.prototype || this\n    if (Object.prototype.hasOwnProperty.call(ctx, Context.internal)) {\n      return ctx[Context.internal]\n    }\n    const parent = Context.ensureInternal.call(Object.getPrototypeOf(this))\n    return ctx[Context.internal] = Object.create(parent)\n  }\n\n  /** @deprecated */\n  static mixin(name: string, options: string[] | Context.MixinOptions) {\n    const internal = Context.ensureInternal.call(this)\n    if (!Array.isArray(options)) {\n      options = [...options.accessors || [], ...options.methods || []]\n    }\n    for (const key of options) {\n      internal[key] = { type: 'mixin', service: name }\n    }\n  }\n\n  /** @deprecated */\n  static service(name: string, options: string[] | Context.MixinOptions = {}) {\n    const internal = this.ensureInternal()\n    if (name in internal) return\n    const key = typeof name === 'symbol' ? name : Symbol(name)\n    internal[name] = { type: 'service', key }\n    if (isConstructor(options)) {\n      internal[name]['prototype'] = options.prototype\n    }\n    this.mixin(name, options)\n  }\n\n  static handler: ProxyHandler<Context> = {\n    get(target, name, ctx: Context) {\n      if (typeof name !== 'string') return Reflect.get(target, name, ctx)\n\n      const checkInject = (name: string) => {\n        // Case 1: a normal property defined on context\n        if (Reflect.has(target, name)) return\n        // Case 2: built-in services and special properties\n        // - prototype: prototype detection\n        // - then: async function return\n        if (['prototype', 'then', 'registry', 'lifecycle'].includes(name)) return\n        // Case 3: access directly from root\n        if (!ctx.runtime.plugin) return\n        // Case 4: inject in ancestor contexts\n        let parent = ctx\n        while (parent.runtime.plugin) {\n          if (parent.runtime.inject.has(name)) return\n          parent = parent.scope.parent\n        }\n        ctx.emit('internal/warning', new Error(`property ${name} is not registered, declare it as \\`inject\\` to suppress this warning`))\n      }\n\n      const internal = ctx[Context.internal][name]\n      if (!internal) {\n        checkInject(name)\n        return Reflect.get(target, name, ctx)\n      }\n\n      if (internal.type === 'mixin') {\n        const service = ctx[internal.service]\n        if (isNullable(service)) return service\n        const value = Reflect.get(service, name)\n        if (typeof value !== 'function') return value\n        return value.bind(service)\n      } else if (internal.type === 'service') {\n        if (!internal.builtin) checkInject(name)\n        return ctx.get(name)\n      }\n    },\n\n    set(target, name, value, ctx: Context) {\n      if (typeof name !== 'string') return Reflect.set(target, name, value, ctx)\n\n      const internal = ctx[Context.internal][name]\n      if (!internal) return Reflect.set(target, name, value, ctx)\n      if (internal.type === 'mixin') {\n        return Reflect.set(ctx[internal.service], name, value)\n      }\n\n      // service\n      const key = ctx[Context.shadow][name] || internal.key\n      const oldValue = ctx.root[key]\n      if (oldValue === value) return true\n\n      // setup filter for events\n      const self = Object.create(null)\n      self[Context.filter] = (ctx2: Context) => {\n        return ctx[Context.shadow][name] === ctx2[Context.shadow][name]\n      }\n\n      // check override\n      if (value && oldValue) {\n        throw new Error(`service ${name} has been registered`)\n      }\n      if (isUnproxyable(value)) {\n        ctx.emit('internal/warning', new Error(`service ${name} is an unproxyable object, which may lead to unexpected behavior`))\n      }\n\n      ctx.root.emit(self, 'internal/before-service', name, value)\n      ctx.root[key] = value\n      if (value && typeof value === 'object') {\n        defineProperty(value, Context.source, ctx)\n      }\n      ctx.root.emit(self, 'internal/service', name, oldValue)\n      return true\n    },\n  }\n\n  constructor(config?: Context.Config) {\n    const self: Context = new Proxy(this, Context.handler)\n    config = resolveConfig(getConstructor(this), config)\n    self[Context.shadow] = Object.create(null)\n    self.root = self\n    self.realms = Object.create(null)\n    self.mixin('scope', ['config', 'runtime', 'collect', 'accept', 'decline'])\n    self.mixin('registry', ['using', 'plugin', 'dispose'])\n    self.mixin('lifecycle', ['on', 'once', 'off', 'after', 'parallel', 'emit', 'serial', 'bail', 'start', 'stop'])\n    self.provide('registry', new Registry(self, config!), true)\n    self.provide('lifecycle', new Lifecycle(self), true)\n\n    const attach = (internal: Context[typeof Context.internal]) => {\n      if (!internal) return\n      attach(Object.getPrototypeOf(internal))\n      for (const key of [...Object.getOwnPropertyNames(internal), ...Object.getOwnPropertySymbols(internal)]) {\n        const constructor = internal[key]['prototype']?.constructor\n        if (!constructor) continue\n        const name = constructor[Context.expose]\n        self[key] = new constructor(self, name ? config?.[name] : config)\n      }\n    }\n    attach(this[Context.internal])\n    return self\n  }\n\n  [Symbol.for('nodejs.util.inspect.custom')]() {\n    return `Context <${this.name}>`\n  }\n\n  get name() {\n    let runtime = this.runtime\n    while (runtime && !runtime.name) {\n      runtime = runtime.parent.runtime\n    }\n    return runtime?.name\n  }\n\n  get events() {\n    return this.lifecycle\n  }\n\n  /** @deprecated */\n  get state() {\n    return this.scope\n  }\n\n  get<K extends string & keyof this>(name: K): undefined | this[K]\n  get(name: string): any\n  get(name: string) {\n    const internal = this[Context.internal][name]\n    if (internal?.type !== 'service') return\n    const key: symbol = this[Context.shadow][name] || internal.key\n    const value = this.root[key]\n    if (!value || typeof value !== 'object') return value\n    if (isUnproxyable(value)) {\n      defineProperty(value, Context.current, this)\n      return value\n    }\n    return new Proxy(value, {\n      get: (target, name, receiver) => {\n        if (name === Context.current) return this\n        return Reflect.get(target, name, receiver)\n      },\n    })\n  }\n\n  provide(name: string, value?: any, builtin?: boolean) {\n    const internal = Context.ensureInternal.call(this)\n    const key = Symbol(name)\n    internal[name] = { type: 'service', key, builtin }\n    this[key] = value\n  }\n\n  mixin(name: string, mixins: string[]) {\n    return Context.mixin.call(this, name, mixins)\n  }\n\n  extend(meta = {}): this {\n    return Object.assign(Object.create(this), meta)\n  }\n\n  isolate(names: string[], label?: string) {\n    const self = this.extend()\n    self[Context.shadow] = Object.create(this[Context.shadow])\n    for (const name of names) {\n      self[Context.shadow][name] = label ? ((this.realms[label] ??= Object.create(null))[name] ??= Symbol(name)) : Symbol(name)\n    }\n    return self\n  }\n}\n\nContext.prototype[Context.internal] = Object.create(null)\n", "import { Awaitable, defineProperty, Promisify, remove } from 'cosmokit'\nimport { Context } from './context'\nimport { EffectScope, ForkScope, MainScope, ScopeStatus } from './scope'\nimport { Plugin } from './registry'\n\nexport function isBailed(value: any) {\n  return value !== null && value !== false && value !== undefined\n}\n\nexport type Parameters<F> = F extends (...args: infer P) => any ? P : never\nexport type ReturnType<F> = F extends (...args: any) => infer R ? R : never\nexport type ThisType<F> = F extends (this: infer T, ...args: any) => any ? T : never\nexport type GetEvents<C extends Context> = C[typeof Context.events]\n\ndeclare module './context' {\n  export interface Context {\n    /* eslint-disable max-len */\n    [Context.events]: Events<this>\n    parallel<K extends keyof GetEvents<this>>(name: K, ...args: Parameters<GetEvents<this>[K]>): Promise<void>\n    parallel<K extends keyof GetEvents<this>>(thisArg: ThisType<GetEvents<this>[K]>, name: K, ...args: Parameters<GetEvents<this>[K]>): Promise<void>\n    emit<K extends keyof GetEvents<this>>(name: K, ...args: Parameters<GetEvents<this>[K]>): void\n    emit<K extends keyof GetEvents<this>>(thisArg: ThisType<GetEvents<this>[K]>, name: K, ...args: Parameters<GetEvents<this>[K]>): void\n    serial<K extends keyof GetEvents<this>>(name: K, ...args: Parameters<GetEvents<this>[K]>): Promisify<ReturnType<GetEvents<this>[K]>>\n    serial<K extends keyof GetEvents<this>>(thisArg: ThisType<GetEvents<this>[K]>, name: K, ...args: Parameters<GetEvents<this>[K]>): Promisify<ReturnType<GetEvents<this>[K]>>\n    bail<K extends keyof GetEvents<this>>(name: K, ...args: Parameters<GetEvents<this>[K]>): ReturnType<GetEvents<this>[K]>\n    bail<K extends keyof GetEvents<this>>(thisArg: ThisType<GetEvents<this>[K]>, name: K, ...args: Parameters<GetEvents<this>[K]>): ReturnType<GetEvents<this>[K]>\n    on<K extends keyof GetEvents<this>>(name: K, listener: GetEvents<this>[K], prepend?: boolean): () => boolean\n    once<K extends keyof GetEvents<this>>(name: K, listener: GetEvents<this>[K], prepend?: boolean): () => boolean\n    off<K extends keyof GetEvents<this>>(name: K, listener: GetEvents<this>[K]): boolean\n    start(): Promise<void>\n    stop(): Promise<void>\n    /* eslint-enable max-len */\n  }\n}\n\nexport namespace Lifecycle {\n  export interface Config {\n    maxListeners?: number\n  }\n}\n\nexport class Lifecycle {\n  isActive = false\n  _tasks = new Set<Promise<void>>()\n  _hooks: Record<keyof any, [Context, (...args: any[]) => any][]> = {}\n\n  constructor(private root: Context) {\n    defineProperty(this, Context.current, root)\n    defineProperty(this.on('internal/hook', function (name, listener, prepend) {\n      const method = prepend ? 'unshift' : 'push'\n      const { scope } = this[Context.current]\n      const { runtime, disposables } = scope\n      if (name === 'ready' && this.isActive) {\n        scope.ensure(async () => listener())\n      } else if (name === 'dispose') {\n        disposables[method](listener as any)\n        defineProperty(listener, 'name', 'event <dispose>')\n        return () => remove(disposables, listener)\n      } else if (name === 'fork') {\n        runtime.forkables[method](listener as any)\n        return scope.collect('event <fork>', () => remove(runtime.forkables, listener))\n      }\n    }), Context.static, root.scope)\n  }\n\n  async flush() {\n    while (this._tasks.size) {\n      await Promise.all(Array.from(this._tasks))\n    }\n  }\n\n  getHooks(name: keyof any, thisArg?: object) {\n    const hooks = this._hooks[name] || []\n    return hooks.slice().filter(([context]) => {\n      const filter = thisArg?.[Context.filter]\n      return !filter || filter.call(thisArg, context)\n    }).map(([, callback]) => callback)\n  }\n\n  prepareEvent(type: string, args: any[]) {\n    const thisArg = typeof args[0] === 'object' ? args.shift() : null\n    const name = args.shift()\n    if (name !== 'internal/event') {\n      this.emit('internal/event', type, name, args, thisArg)\n    }\n    return [this.getHooks(name, thisArg), thisArg ?? this[Context.current]] as const\n  }\n\n  async parallel(...args: any[]) {\n    const [hooks, thisArg] = this.prepareEvent('parallel', args)\n    await Promise.all(hooks.map(async (callback) => {\n      await callback.apply(thisArg, args)\n    }))\n  }\n\n  emit(...args: any[]) {\n    const [hooks, thisArg] = this.prepareEvent('emit', args)\n    for (const callback of hooks) {\n      callback.apply(thisArg, args)\n    }\n  }\n\n  async serial(...args: any[]) {\n    const [hooks, thisArg] = this.prepareEvent('serial', args)\n    for (const callback of hooks) {\n      const result = await callback.apply(thisArg, args)\n      if (isBailed(result)) return result\n    }\n  }\n\n  bail(...args: any[]) {\n    const [hooks, thisArg] = this.prepareEvent('bail', args)\n    for (const callback of hooks) {\n      const result = callback.apply(thisArg, args)\n      if (isBailed(result)) return result\n    }\n  }\n\n  register(label: string, hooks: [Context, any][], listener: any, prepend?: boolean) {\n    const maxListeners = this.root.config.maxListeners!\n    if (hooks.length >= maxListeners!) {\n      this.root.emit('internal/warning', new Error(`max listener count (${maxListeners!}) for ${label} exceeded, which may be caused by a memory leak`))\n    }\n\n    const caller = this[Context.current]\n    const method = prepend ? 'unshift' : 'push'\n    hooks[method]([caller, listener])\n    return caller.state.collect(label, () => this.unregister(hooks, listener))\n  }\n\n  unregister(hooks: [Context, any][], listener: any) {\n    const index = hooks.findIndex(([context, callback]) => callback === listener)\n    if (index >= 0) {\n      hooks.splice(index, 1)\n      return true\n    }\n  }\n\n  on(name: keyof any, listener: (...args: any) => any, prepend = false) {\n    // handle special events\n    const result = this.bail(this, 'internal/hook', name, listener, prepend)\n    if (result) return result\n\n    const hooks = this._hooks[name] ||= []\n    const label = typeof name === 'string' ? `event <${name}>` : 'event (Symbol)'\n    return this.register(label, hooks, listener, prepend)\n  }\n\n  once(name: keyof any, listener: (...args: any) => any, prepend = false) {\n    const dispose = this.on(name, function (...args: any[]) {\n      dispose()\n      return listener.apply(this, args)\n    }, prepend)\n    return dispose\n  }\n\n  off(name: keyof any, listener: (...args: any) => any) {\n    return this.unregister(this._hooks[name] || [], listener)\n  }\n\n  async start() {\n    this.isActive = true\n    const hooks = this._hooks.ready || []\n    while (hooks.length) {\n      const [context, callback] = hooks.shift()!\n      context.scope.ensure(async () => callback())\n    }\n    await this.flush()\n  }\n\n  async stop() {\n    this.isActive = false\n    // `dispose` event is handled by state.disposables\n    this.root.scope.reset()\n  }\n}\n\nexport interface Events<C extends Context = Context> {\n  'fork': Plugin.Function<C, C['config']>\n  'ready'(): Awaitable<void>\n  'dispose'(): Awaitable<void>\n  'internal/fork'(fork: ForkScope<Context.Parameterized<C>>): void\n  'internal/runtime'(runtime: MainScope<Context.Parameterized<C>>): void\n  'internal/status'(scope: EffectScope<Context.Parameterized<C>>, oldValue: ScopeStatus): void\n  'internal/warning'(this: C, format: any, ...param: any[]): void\n  'internal/before-service'(name: string, value: any): void\n  'internal/service'(name: string, oldValue: any): void\n  'internal/before-update'(fork: ForkScope<Context.Parameterized<C>>, config: any): void\n  'internal/update'(fork: ForkScope<Context.Parameterized<C>>, oldConfig: any): void\n  'internal/hook'(this: Lifecycle, name: string, listener: Function, prepend: boolean): () => boolean\n  'internal/event'(type: 'emit' | 'parallel' | 'serial' | 'bail', name: string, args: any[], thisArg: any): void\n}\n", "import { defineProperty } from 'cosmokit'\nimport { Context } from './context'\nimport { ForkScope, Inject, MainScope } from './scope'\nimport { resolveConfig } from './utils'\n\nexport function isApplicable(object: Plugin) {\n  return object && typeof object === 'object' && typeof object.apply === 'function'\n}\n\nexport type Plugin<C extends Context = Context, T = any> =\n  | Plugin.Function<C, T>\n  | Plugin.Constructor<C, T>\n  | Plugin.Object<C, T>\n\nexport namespace Plugin {\n  export interface Base {\n    name?: string\n    reactive?: boolean\n    reusable?: boolean\n    Config?: (config?: any) => any\n    inject?: string[] | Partial<Inject>\n    /** @deprecated use `inject` instead */\n    using?: string[] | Partial<Inject>\n  }\n\n  export interface Function<C extends Context = Context, T = any> extends Base {\n    (ctx: C, options: T): void\n  }\n\n  export interface Constructor<C extends Context = Context, T = any> extends Base {\n    new (ctx: C, options: T): void\n  }\n\n  export interface Object<C extends Context = Context, T = any> extends Base {\n    apply: (ctx: C, options: T) => void\n  }\n}\n\ndeclare module './context' {\n  export interface Context {\n    /* eslint-disable max-len */\n    using(deps: string[] | Partial<Inject>, callback: Plugin.Function<Context.Parameterized<this, void>, void>): ForkScope<Context.Parameterized<this, void>>\n    plugin<T, S = T>(plugin: Plugin.Function<Context.Parameterized<this, T>, T> & { schema?: true; Config: (config?: S) => T }, config?: S): ForkScope<Context.Parameterized<this, T>>\n    plugin<T, S = T>(plugin: Plugin.Constructor<Context.Parameterized<this, T>, T> & { schema?: true; Config: (config?: S) => T }, config?: S): ForkScope<Context.Parameterized<this, T>>\n    plugin<T, S = T>(plugin: Plugin.Object<Context.Parameterized<this, T>, T> & { schema?: true; Config: (config?: S) => T }, config?: S): ForkScope<Context.Parameterized<this, T>>\n    plugin<T>(plugin: Plugin.Function<Context.Parameterized<this, T>, T>, config?: T): ForkScope<Context.Parameterized<this, T>>\n    plugin<T>(plugin: Plugin.Constructor<Context.Parameterized<this, T>, T>, config?: T): ForkScope<Context.Parameterized<this, T>>\n    plugin<T>(plugin: Plugin.Object<Context.Parameterized<this, T>, T>, config?: T): ForkScope<Context.Parameterized<this, T>>\n    /** @deprecated use `ctx.registry.delete()` instead */\n    dispose(plugin?: Plugin<Context.Parameterized<this>>): boolean\n    /* eslint-enable max-len */\n  }\n}\n\nexport namespace Registry {\n  export interface Config {}\n}\n\nexport class Registry<C extends Context = Context> {\n  private _counter = 0\n  private _internal = new Map<Plugin<C>, MainScope<C>>()\n\n  constructor(private root: Context, config: Registry.Config) {\n    defineProperty(this, Context.current, root)\n    root.scope = new MainScope(this, null!, config)\n    root.scope.runtime.isReactive = true\n  }\n\n  get counter() {\n    return ++this._counter\n  }\n\n  get size() {\n    return this._internal.size\n  }\n\n  resolve(plugin: Plugin) {\n    // Allow `null` as a special case.\n    if (plugin === null) return plugin\n    if (typeof plugin === 'function') return plugin\n    if (isApplicable(plugin)) return plugin.apply\n    throw new Error('invalid plugin, expect function or object with an \"apply\" method')\n  }\n\n  get(plugin: Plugin<C>) {\n    return this._internal.get(this.resolve(plugin))\n  }\n\n  has(plugin: Plugin<C>) {\n    return this._internal.has(this.resolve(plugin))\n  }\n\n  set(plugin: Plugin<C>, state: MainScope<C>) {\n    return this._internal.set(this.resolve(plugin), state)\n  }\n\n  delete(plugin: Plugin<C>) {\n    plugin = this.resolve(plugin)\n    const runtime = this.get(plugin)\n    if (!runtime) return false\n    this._internal.delete(plugin)\n    return runtime.dispose()\n  }\n\n  keys() {\n    return this._internal.keys()\n  }\n\n  values() {\n    return this._internal.values()\n  }\n\n  entries() {\n    return this._internal.entries()\n  }\n\n  forEach(callback: (value: MainScope<C>, key: Plugin<C>, map: Map<Plugin<C>, MainScope<C>>) => void) {\n    return this._internal.forEach(callback)\n  }\n\n  using(inject: string[] | Partial<Inject>, callback: Plugin.Function<C, void>) {\n    return this.plugin({ inject, apply: callback, name: callback.name })\n  }\n\n  plugin(plugin: Plugin<C>, config?: any) {\n    // check if it's a valid plugin\n    this.resolve(plugin)\n\n    const context: Context = this[Context.current]\n    if (context.scope.uid === null) {\n      context.emit('internal/warning', new Error('try to plugin on a disposed scope'))\n      return\n    }\n\n    // resolve plugin config\n    let error: any\n    try {\n      config = resolveConfig(plugin, config)\n    } catch (reason) {\n      context.emit('internal/warning', reason)\n      error = reason\n      config = null\n    }\n\n    // check duplication\n    let runtime = this.get(plugin)\n    if (runtime) {\n      if (!runtime.isForkable) {\n        context.emit('internal/warning', new Error(`duplicate plugin detected: ${plugin.name}`))\n      }\n      return runtime.fork(context, config, error)\n    }\n\n    runtime = new MainScope(this, plugin, config, error)\n    return runtime.fork(context, config, error)\n  }\n\n  dispose(plugin: Plugin<C>) {\n    return this.delete(plugin)\n  }\n}\n", "import { deepEqual, defineProperty, isNullable, remove } from 'cosmokit'\nimport { Context } from './context'\nimport { Plugin, Registry } from './registry'\nimport { getConstructor, isConstructor, resolveConfig } from './utils'\n\ndeclare module './context' {\n  export interface Context {\n    scope: EffectScope<this>\n    runtime: MainScope<this>\n    collect(label: string, callback: () => void): () => void\n    accept(callback?: (config: this['config']) => void | boolean, options?: AcceptOptions): () => boolean\n    accept(keys: (keyof this['config'])[], callback?: (config: this['config']) => void | boolean, options?: AcceptOptions): () => boolean\n    decline(keys: (keyof this['config'])[]): () => boolean\n  }\n}\n\nexport interface Inject {\n  readonly required: string[]\n  readonly optional: string[]\n}\n\nexport type Disposable = () => void\n\nexport interface AcceptOptions {\n  passive?: boolean\n  immediate?: boolean\n}\n\nexport interface Acceptor extends AcceptOptions {\n  keys?: string[]\n  callback?: (config: any) => void | boolean\n}\n\nexport type ScopeStatus = 'pending' | 'loading' | 'active' | 'failed' | 'disposed'\n\nexport abstract class EffectScope<C extends Context = Context> {\n  public uid: number | null\n  public ctx: C\n  public disposables: Disposable[] = []\n  public error: any\n  public status: ScopeStatus = 'pending'\n\n  // Same as `this.ctx`, but with a more specific type.\n  protected context: Context\n  protected proxy: any\n  protected acceptors: Acceptor[] = []\n  protected tasks = new Set<Promise<void>>()\n  protected hasError = false\n  protected isActive = false\n\n  abstract runtime: MainScope<C>\n  abstract dispose(): boolean\n  abstract update(config: C['config'], forced?: boolean): void\n\n  constructor(public parent: C, public config: C['config']) {\n    this.uid = parent.registry ? parent.registry.counter : 0\n    this.ctx = this.context = parent.extend({ scope: this })\n    this.proxy = new Proxy({}, {\n      get: (target, key) => Reflect.get(this.config, key),\n    })\n  }\n\n  protected get _config() {\n    return this.runtime.isReactive ? this.proxy : this.config\n  }\n\n  collect(label: string, callback: () => any) {\n    const dispose = defineProperty(() => {\n      remove(this.disposables, dispose)\n      return callback()\n    }, 'name', label)\n    this.disposables.push(dispose)\n    return dispose\n  }\n\n  restart() {\n    this.reset()\n    this.error = null\n    this.hasError = false\n    this.status = 'pending'\n    this.start()\n  }\n\n  protected _getStatus() {\n    if (this.uid === null) return 'disposed'\n    if (this.hasError) return 'failed'\n    if (this.tasks.size) return 'loading'\n    if (this.ready) return 'active'\n    return 'pending'\n  }\n\n  protected _updateStatus(callback?: () => void) {\n    const oldValue = this.status\n    callback?.()\n    this.status = this._getStatus()\n    if (oldValue !== this.status) {\n      this.context.emit('internal/status', this, oldValue)\n    }\n  }\n\n  ensure(callback: () => Promise<void>) {\n    const task = callback()\n      .catch((reason) => {\n        this.context.emit('internal/warning', reason)\n        this.cancel(reason)\n      })\n      .finally(() => {\n        this._updateStatus(() => this.tasks.delete(task))\n        this.context.events._tasks.delete(task)\n      })\n    this._updateStatus(() => this.tasks.add(task))\n    this.context.events._tasks.add(task)\n  }\n\n  cancel(reason?: any) {\n    this.error = reason\n    this._updateStatus(() => this.hasError = true)\n    this.reset()\n  }\n\n  protected setupInject() {\n    if (!this.runtime.using.length) return\n    defineProperty(this.context.on('internal/before-service', (name) => {\n      if (!this.runtime.using.includes(name)) return\n      this._updateStatus()\n      this.reset()\n    }), Context.static, this)\n    defineProperty(this.context.on('internal/service', (name) => {\n      if (!this.runtime.using.includes(name)) return\n      this.start()\n    }), Context.static, this)\n  }\n\n  get ready() {\n    return this.runtime.using.every(name => !isNullable(this.ctx[name]))\n  }\n\n  reset() {\n    this.isActive = false\n    this.disposables = this.disposables.splice(0).filter((dispose) => {\n      if (this.uid !== null && dispose[Context.static] === this) return true\n      dispose()\n    })\n  }\n\n  protected init(error?: any) {\n    if (!this.config) {\n      this.cancel(error)\n    } else {\n      this.start()\n    }\n  }\n\n  start() {\n    if (!this.ready || this.isActive || this.uid === null) return true\n    this.isActive = true\n    this._updateStatus(() => this.hasError = false)\n  }\n\n  accept(callback?: (config: C['config']) => void | boolean, options?: AcceptOptions): () => boolean\n  accept(keys: string[], callback?: (config: C['config']) => void | boolean, options?: AcceptOptions): () => boolean\n  accept(...args: any[]) {\n    const keys = Array.isArray(args[0]) ? args.shift() : null\n    const acceptor: Acceptor = { keys, callback: args[0], ...args[1] }\n    this.acceptors.push(acceptor)\n    if (acceptor.immediate) acceptor.callback?.(this.config)\n    return this.collect(`accept <${keys?.join(', ') || '*'}>`, () => remove(this.acceptors, acceptor))\n  }\n\n  decline(keys: string[]) {\n    return this.accept(keys, () => true)\n  }\n\n  checkUpdate(resolved: any, forced?: boolean) {\n    if (forced || !this.config) return [true, true]\n    if (forced === false) return [false, false]\n\n    const modified: Record<string, boolean> = Object.create(null)\n    const checkPropertyUpdate = (key: string) => {\n      const result = modified[key] ??= !deepEqual(this.config[key], resolved[key])\n      hasUpdate ||= result\n      return result\n    }\n\n    const ignored = new Set<string>()\n    let hasUpdate = false, shouldRestart = false\n    let fallback: boolean | null = this.runtime.isReactive || null\n    for (const { keys, callback, passive } of this.acceptors) {\n      if (!keys) {\n        fallback ||= !passive\n      } else if (passive) {\n        keys?.forEach(key => ignored.add(key))\n      } else {\n        let hasUpdate = false\n        for (const key of keys) {\n          hasUpdate ||= checkPropertyUpdate(key)\n        }\n        if (!hasUpdate) continue\n      }\n      const result = callback?.(resolved)\n      if (result) shouldRestart = true\n    }\n\n    for (const key in { ...this.config, ...resolved }) {\n      if (fallback === false) continue\n      if (!(key in modified) && !ignored.has(key)) {\n        const hasUpdate = checkPropertyUpdate(key)\n        if (fallback === null) shouldRestart ||= hasUpdate\n      }\n    }\n    return [hasUpdate, shouldRestart]\n  }\n}\n\nexport class ForkScope<C extends Context = Context> extends EffectScope<C> {\n  dispose: () => boolean\n\n  constructor(parent: Context, public runtime: MainScope<C>, config: C['config'], error?: any) {\n    super(parent as C, config)\n\n    this.dispose = defineProperty(parent.scope.collect(`fork <${parent.runtime.name}>`, () => {\n      this.uid = null\n      this.reset()\n      const result = remove(runtime.disposables, this.dispose)\n      if (remove(runtime.children, this) && !runtime.children.length) {\n        parent.registry.delete(runtime.plugin)\n      }\n      this.context.emit('internal/fork', this)\n      return result\n    }), Context.static, runtime)\n\n    runtime.children.push(this)\n    runtime.disposables.push(this.dispose)\n    this.context.emit('internal/fork', this)\n    if (runtime.isReusable) {\n      // non-reusable plugin forks are not responsive to isolated service changes\n      this.setupInject()\n    }\n\n    this.init(error)\n  }\n\n  start() {\n    if (super.start()) return true\n    for (const fork of this.runtime.forkables) {\n      this.ensure(async () => fork(this.context, this._config))\n    }\n  }\n\n  update(config: any, forced?: boolean) {\n    const oldConfig = this.config\n    const state: EffectScope<C> = this.runtime.isForkable ? this : this.runtime\n    if (state.config !== oldConfig) return\n    const resolved = resolveConfig(this.runtime.plugin, config)\n    const [hasUpdate, shouldRestart] = state.checkUpdate(resolved, forced)\n    this.context.emit('internal/before-update', this, config)\n    this.config = resolved\n    state.config = resolved\n    if (hasUpdate) {\n      this.context.emit('internal/update', this, oldConfig)\n    }\n    if (shouldRestart) state.restart()\n  }\n}\n\nexport class MainScope<C extends Context = Context> extends EffectScope<C> {\n  runtime = this\n  schema: any\n  name?: string\n  using: string[] = []\n  inject = new Set<string>()\n  forkables: Function[] = []\n  children: ForkScope<C>[] = []\n  isReusable?: boolean = false\n  isReactive?: boolean = false\n\n  constructor(registry: Registry<C>, public plugin: Plugin, config: any, error?: any) {\n    super(registry[Context.current] as C, config)\n    registry.set(plugin, this)\n    if (!plugin) {\n      this.name = 'root'\n      this.isActive = true\n    } else {\n      this.setup()\n      this.init(error)\n    }\n  }\n\n  get isForkable() {\n    return this.forkables.length > 0\n  }\n\n  fork(parent: Context, config: any, error?: any) {\n    return new ForkScope(parent, this, config, error)\n  }\n\n  dispose() {\n    this.uid = null\n    this.reset()\n    this.context.emit('internal/runtime', this)\n    return true\n  }\n\n  private setup() {\n    const { name } = this.plugin\n    if (name && name !== 'apply') this.name = name\n    this.schema = this.plugin['Config'] || this.plugin['schema']\n    const inject = this.plugin['using'] || this.plugin['inject'] || []\n    if (Array.isArray(inject)) {\n      this.using = inject\n      this.inject = new Set(inject)\n    } else {\n      this.using = inject.required || []\n      this.inject = new Set([...this.using, ...inject.optional || []])\n    }\n    this.isReusable = this.plugin['reusable']\n    this.isReactive = this.plugin['reactive']\n    this.context.emit('internal/runtime', this)\n\n    if (this.isReusable) {\n      this.forkables.push(this.apply)\n    } else {\n      super.setupInject()\n    }\n  }\n\n  private apply = (context: Context, config: any) => {\n    if (typeof this.plugin !== 'function') {\n      return this.plugin.apply(context, config)\n    } else if (isConstructor(this.plugin)) {\n      // eslint-disable-next-line new-cap\n      const instance = new this.plugin(context, config)\n      const name = instance[Context.expose]\n      if (name) {\n        context[name] = instance\n      }\n      if (instance['fork']) {\n        this.forkables.push(instance['fork'].bind(instance))\n      }\n    } else {\n      return this.plugin(context, config)\n    }\n  }\n\n  reset() {\n    super.reset()\n    for (const fork of this.children) {\n      fork.reset()\n    }\n  }\n\n  start() {\n    if (super.start()) return true\n    if (!this.isReusable && this.plugin) {\n      this.ensure(async () => this.apply(this.context, this._config))\n    }\n    for (const fork of this.children) {\n      fork.start()\n    }\n  }\n\n  update(config: C['config'], forced?: boolean) {\n    if (this.isForkable) {\n      this.context.emit('internal/warning', new Error(`attempting to update forkable plugin \"${this.plugin.name}\", which may lead to unexpected behavior`))\n    }\n    const oldConfig = this.config\n    const resolved = resolveConfig(this.runtime.plugin || getConstructor(this.context), config)\n    const [hasUpdate, shouldRestart] = this.checkUpdate(resolved, forced)\n    const state = this.children.find(fork => fork.config === oldConfig)\n    this.config = resolved\n    if (state) {\n      this.context.emit('internal/before-update', state, config)\n      state.config = resolved\n      if (hasUpdate) {\n        this.context.emit('internal/update', state, oldConfig)\n      }\n    }\n    if (shouldRestart) this.restart()\n  }\n}\n", "export function isConstructor(func: any): func is new (...args: any) => any {\n  // async function or arrow function\n  if (!func.prototype) return false\n  // generator function or malformed definition\n  if (func.prototype.constructor !== func) return false\n  return true\n}\n\nexport function getConstructor(instance: any) {\n  return Object.getPrototypeOf(instance).constructor\n}\n\nexport function resolveConfig(plugin: any, config: any) {\n  const schema = plugin['Config'] || plugin['schema']\n  if (schema && plugin['schema'] !== false) config = schema(config)\n  return config ?? {}\n}\n\nexport function isUnproxyable(value: any) {\n  return [Map, Set, Date, Promise].some(constructor => value instanceof constructor)\n}\n", "import { Awaitable, defineProperty } from 'cosmokit'\nimport { Context } from './context'\n\nexport class Service<C extends Context = Context> {\n  protected start(): Awaitable<void> {}\n  protected stop(): Awaitable<void> {}\n  protected fork?(ctx: C, config: any): void\n\n  constructor(protected ctx: C, name: string, immediate?: boolean) {\n    ctx.root.provide(name)\n    defineProperty(this, Context.current, ctx)\n\n    if (immediate) {\n      this[Context.expose] = name\n    }\n\n    ctx.on('ready', async () => {\n      // await until next tick because derived class has not been initialized yet\n      await Promise.resolve()\n      await this.start()\n      if (!immediate) ctx[name] = this\n    })\n\n    ctx.on('dispose', async () => {\n      ctx[name] = undefined\n      await this.stop()\n    })\n  }\n\n  get caller() {\n    return this[Context.current] as C\n  }\n}\n", "import { Component, reactive } from 'vue'\nimport { MaybeRefOrGetter, toValue } from '@vueuse/core'\nimport { Context, Dict, Disposable, Field, omit, root, router, store } from '.'\n\ndeclare module 'vue-router' {\n  interface RouteMeta {\n    activity?: Activity\n  }\n}\n\nexport namespace Activity {\n  export interface Options {\n    id?: string\n    path: string\n    strict?: boolean\n    component: Component\n    name: MaybeRefOrGetter<string>\n    desc?: MaybeRefOrGetter<string>\n    icon?: MaybeRefOrGetter<string>\n    order?: number\n    authority?: number\n    position?: 'top' | 'bottom'\n    fields?: Field[]\n    /** @deprecated */\n    when?: () => boolean\n    disabled?: () => boolean\n  }\n}\n\nexport const activities = reactive<Dict<Activity>>({})\n\nexport interface Activity extends Activity.Options {}\n\nfunction getActivityId(path: string) {\n  return path.split('/').find(Boolean) ?? ''\n}\n\nexport class Activity {\n  id: string\n  _disposables: Disposable[] = []\n\n  constructor(public ctx: Context, public options: Activity.Options) {\n    options.order ??= 0\n    options.position ??= 'top'\n    Object.assign(this, omit(options, ['icon', 'name', 'desc', 'disabled']))\n    const { path, id = getActivityId(path), component } = options\n    this._disposables.push(router.addRoute({ path, name: id, component, meta: { activity: this } }))\n    this.id ??= id\n    this.handleUpdate()\n    this.authority ??= 0\n    this.fields ??= []\n    activities[this.id] = this\n  }\n\n  handleUpdate() {\n    const { redirect } = router.currentRoute.value.query\n    if (typeof redirect === 'string') {\n      const location = router.resolve(redirect)\n      if (location.matched.length) {\n        router.replace(location)\n      }\n    }\n  }\n\n  get icon() {\n    return toValue(this.options.icon ?? 'activity:default')\n  }\n\n  get name() {\n    return toValue(this.options.name ?? this.id)\n  }\n\n  get desc() {\n    return toValue(this.options.desc)\n  }\n\n  disabled() {\n    if (root.bail('activity', this)) return true\n    if (!this.fields.every(key => store[key])) return true\n    if (this.when && !this.when()) return true\n    if (this.options.disabled?.()) return true\n  }\n\n  dispose() {\n    this._disposables.forEach(dispose => dispose())\n    const current = router.currentRoute.value\n    if (current?.meta?.activity === this) {\n      router.push({\n        path: '/',\n        query: { redirect: current.fullPath },\n      })\n    }\n    return delete activities[this.id]\n  }\n}\n", "import { RemovableRef, useLocalStorage, usePreferredDark } from '@vueuse/core'\nimport { computed, reactive, watchEffect } from 'vue'\nimport { Config } from '.'\n\nexport let useStorage = <T extends object>(key: string, version: number, fallback?: () => T): RemovableRef<T> => {\n  const initial = fallback ? fallback() : {} as T\n  initial['__version__'] = version\n  const storage = useLocalStorage('koishi.console.' + key, initial)\n  if (storage.value['__version__'] !== version) {\n    storage.value = initial\n  }\n  return storage\n}\n\nexport function provideStorage(factory: typeof useStorage) {\n  useStorage = factory\n}\n\ninterface StorageData<T> {\n  version: number\n  data: T\n}\n\nexport function createStorage<T extends object>(key: string, version: number, fallback?: () => T) {\n  const storage = useLocalStorage('koishi.console.' + key, {} as StorageData<T>)\n  const initial = fallback ? fallback() : {} as T\n  if (storage.value.version !== version) {\n    storage.value = { version, data: initial }\n  } else if (!Array.isArray(storage.value.data)) {\n    storage.value.data = { ...initial, ...storage.value.data }\n  }\n  return reactive<T>(storage.value['data'])\n}\n\nexport const config = useStorage<Config>('config', undefined, () => ({\n  theme: {\n    mode: 'auto',\n    dark: 'default-dark',\n    light: 'default-light',\n  },\n  locale: 'zh-CN',\n}))\n\nconst preferDark = usePreferredDark()\n\nconst mode = computed(() => {\n  const mode = config.value.theme.mode\n  if (mode !== 'auto') return mode\n  return preferDark.value ? 'dark' : 'light'\n})\n\nexport const useConfig = () => config\nexport const useColorMode = () => mode\n\nwatchEffect(() => {\n  const root = window.document.querySelector('html')\n  root.setAttribute('theme', config.value.theme[mode.value])\n  if (mode.value === 'dark') {\n    root.classList.add('dark')\n  } else {\n    root.classList.remove('dark')\n  }\n}, { flush: 'post' })\n", "import { reactive, watch } from 'vue'\nimport { Context, Dict, root, store } from '.'\nimport { EffectScope } from 'cordis'\n\nexport type Disposable = () => void\nexport type Extension = (ctx: Context) => void\n\nexport function defineExtension(callback: Extension) {\n  return callback\n}\n\nexport function unwrapExports(module: any) {\n  return module?.default || module\n}\n\nconst loaders: Dict<(ctx: Context, url: string) => Promise<void>> = {\n  async [`.css`](ctx, url) {\n    const link = document.createElement('link')\n    link.rel = 'stylesheet'\n    link.href = url\n    await new Promise((resolve, reject) => {\n      link.onload = resolve\n      link.onerror = reject\n      document.head.appendChild(link)\n      ctx.on('dispose', () => {\n        document.head.removeChild(link)\n      })\n    })\n  },\n  async [``](ctx, url) {\n    const exports = await import(/* @vite-ignore */ url)\n    ctx.plugin(unwrapExports(exports))\n  },\n}\n\nexport interface LoadResult {\n  scope: EffectScope\n  done: boolean\n  paths: string[]\n}\n\nexport const extensions: Dict<LoadResult> = reactive({})\n\nexport const initTask = new Promise<void>((resolve) => {\n  watch(() => store.entry, async (newValue, oldValue) => {\n    newValue ||= {}\n    for (const key in extensions) {\n      if (newValue[key]) continue\n      extensions[key].scope.dispose()\n      delete extensions[key]\n    }\n\n    await Promise.all(Object.entries(newValue).map(([key, { files, paths }]) => {\n      if (extensions[key]) return\n      const scope = root.plugin(() => {})\n      scope.ctx.extension = extensions[key] = { done: false, scope, paths }\n      const task = Promise.all(files.map((url) => {\n        for (const ext in loaders) {\n          if (!url.endsWith(ext)) continue\n          return loaders[ext](scope.ctx, url)\n        }\n      }))\n      task.finally(() => extensions[key].done = true)\n    }))\n\n    if (!oldValue) {\n      resolve()\n      if (!root.events.isActive) root.start()\n    }\n  }, { deep: true })\n})\n", "import * as cordis from 'cordis'\nimport { Schema, SchemaBase } from '@koishijs/components'\nimport { Dict, Intersect, remove } from 'cosmokit'\nimport {\n  App, Component, createApp, defineComponent, h, inject, markRaw, MaybeRefOrGetter,\n  onBeforeUnmount, provide, reactive, resolveComponent, shallowReactive, toValue,\n} from 'vue'\nimport { activities, Activity } from './activity'\nimport { SlotOptions } from './components'\nimport { useColorMode, useConfig } from './config'\nimport { extensions, LoadResult } from './loader'\nimport { ActionContext } from '.'\n\nexport type Plugin = cordis.Plugin<Context>\n\nexport namespace Plugin {\n  export type Function<T = any> = cordis.Plugin.Function<T, Context>\n  export type Constructor<T = any> = cordis.Plugin.Constructor<T, Context>\n  export type Object<S = any, T = any> = cordis.Plugin.Object<S, T, Context>\n}\n\nexport type EffectScope = cordis.EffectScope<Context>\nexport type ForkScope = cordis.ForkScope<Context>\nexport type MainScope = cordis.MainScope<Context>\nexport type Service = cordis.Service<Context>\n\nexport const Service = cordis.Service<Context>\n\nconst config = useConfig()\nconst mode = useColorMode()\n\n// layout api\n\nexport interface ThemeOptions {\n  id: string\n  name: string | Dict<string>\n  components?: Dict<Component>\n}\n\nexport type MaybeGetter<T> = T | ((scope: Flatten<ActionContext>) => T)\n\nexport interface Events<C extends Context> extends cordis.Events<C> {\n  'activity'(activity: Activity): boolean\n}\n\nexport interface Context {\n  [Context.events]: Events<this>\n}\n\nexport function useContext() {\n  const parent = inject('cordis') as Context\n  const fork = parent.plugin(() => {})\n  onBeforeUnmount(() => fork.dispose())\n  return fork.ctx\n}\n\nexport interface ActionOptions {\n  disabled?: (scope: Flatten<ActionContext>) => boolean\n  action: (scope: Flatten<ActionContext>) => any\n}\n\nexport type LegacyMenuItem = Partial<ActionOptions> & Omit<MenuItem, 'id'>\n\nexport interface MenuItem {\n  id: string\n  label?: MaybeGetter<string>\n  type?: MaybeGetter<string>\n  icon?: MaybeGetter<string>\n  order?: number\n}\n\ninterface SettingOptions extends Ordered {\n  id: string\n  title?: string\n  disabled?: () => boolean\n  schema?: Schema\n  component?: Component\n}\n\ninterface Ordered {\n  order?: number\n}\n\nfunction insert<T extends Ordered>(list: T[], item: T) {\n  markRaw(item)\n  const index = list.findIndex(a => a.order < item.order)\n  if (index >= 0) {\n    list.splice(index, 0, item)\n  } else {\n    list.push(item)\n  }\n}\n\ntype Store<S extends {}> = { [K in keyof S]?: MaybeRefOrGetter<S[K]> }\n\ntype Flatten<S extends {}> = Intersect<{\n  [K in keyof S]: K extends `${infer L}.${infer R}`\n    ? { [P in L]: Flatten<{ [P in R]: S[K] }> }\n    : { [P in K]: S[K] }\n}[keyof S]>\n\nclass Internal {\n  extensions = extensions\n  activities = activities\n  routeCache = routeCache\n  scope = shallowReactive<Store<ActionContext>>({})\n  menus = reactive<Dict<MenuItem[]>>({})\n  actions = reactive<Dict<ActionOptions>>({})\n  views = reactive<Dict<SlotOptions[]>>({})\n  themes = reactive<Dict<ThemeOptions>>({})\n  settings = reactive<Dict<SettingOptions[]>>({})\n  activeMenus = reactive<{ id: string; styles: Partial<CSSStyleDeclaration> }[]>([])\n\n  createScope(scope = this.scope, prefix = '') {\n    return new Proxy({}, {\n      get: (target, key) => {\n        if (typeof key === 'symbol') return target[key]\n        key = prefix + key\n        if (key in scope) return toValue(scope[key])\n        const _prefix = key + '.'\n        if (Object.keys(scope).some(k => k.startsWith(_prefix))) {\n          return this.createScope(scope, key + '.')\n        }\n      },\n    })\n  }\n}\n\nexport function useMenu<K extends keyof ActionContext>(id: K) {\n  const ctx = useContext()\n  return (event: MouseEvent, value: MaybeRefOrGetter<ActionContext[K]>) => {\n    ctx.define(id, value)\n    event.preventDefault()\n    const { clientX, clientY } = event\n    ctx.internal.activeMenus.splice(0, Infinity, { id, styles: { left: clientX + 'px', top: clientY + 'px' } })\n  }\n}\n\nexport const routeCache = reactive<Record<keyof any, string>>({})\n\nexport class Context extends cordis.Context {\n  app: App\n  extension: LoadResult\n  internal = new Internal()\n\n  constructor() {\n    super()\n    this.app = createApp(defineComponent({\n      setup() {\n        return () => [\n          h(resolveComponent('k-slot'), { name: 'root', single: true }),\n          h(resolveComponent('k-slot'), { name: 'global' }),\n        ]\n      },\n    }))\n    this.app.provide('cordis', this)\n  }\n\n  wrapComponent(component: Component) {\n    if (!component) return\n    const caller = this[Context.current] || this\n    return defineComponent((props, { slots }) => {\n      provide('cordis', caller)\n      return () => h(component, props, slots)\n    })\n  }\n\n  /** @deprecated */\n  addView(options: SlotOptions) {\n    return this.slot(options)\n  }\n\n  /** @deprecated */\n  addPage(options: Activity.Options) {\n    return this.page(options)\n  }\n\n  slot(options: SlotOptions) {\n    options.order ??= 0\n    options.component = this.wrapComponent(options.component)\n    if (options.when) options.disabled = () => !options.when()\n    const list = this.internal.views[options.type] ||= []\n    insert(list, options)\n    return this.scope.collect('view', () => remove(list, options))\n  }\n\n  page(options: Activity.Options) {\n    options.component = this.wrapComponent(options.component)\n    const activity = new Activity(this, options)\n    return this.scope.collect('page', () => activity.dispose())\n  }\n\n  schema(extension: SchemaBase.Extension) {\n    SchemaBase.extensions.add(extension)\n    extension.component = this.wrapComponent(extension.component)\n    return this.scope.collect('schema', () => SchemaBase.extensions.delete(extension))\n  }\n\n  action(id: string, options: ActionOptions) {\n    markRaw(options)\n    this.internal.actions[id] = options\n    return this.scope.collect('actions', () => delete this.internal.actions[id])\n  }\n\n  menu(id: string, items: MenuItem[]) {\n    const list = this.internal.menus[id] ||= []\n    items.forEach(item => insert(list, item))\n    return this.scope.collect('menus', () => {\n      items.forEach(item => remove(list, item))\n      return true\n    })\n  }\n\n  define<K extends keyof ActionContext>(key: K, value: MaybeRefOrGetter<ActionContext[K]>) {\n    this.internal.scope[key] = value as any\n    return this.scope.collect('activate', () => delete this.internal.scope[key])\n  }\n\n  settings(options: SettingOptions) {\n    markRaw(options)\n    options.order ??= 0\n    options.component = this.wrapComponent(options.component)\n    const list = this.internal.settings[options.id] ||= []\n    insert(list, options)\n    if (options.schema) {\n      try {\n        options.schema(config.value, { autofix: true })\n      } catch (error) {\n        console.error(error)\n      }\n    }\n    return this.scope.collect('settings', () => remove(list, options))\n  }\n\n  theme(options: ThemeOptions) {\n    markRaw(options)\n    this.internal.themes[options.id] = options\n    for (const [type, component] of Object.entries(options.components || {})) {\n      this.slot({\n        type,\n        disabled: () => config.value.theme[mode.value] !== options.id,\n        component,\n      })\n    }\n    return this.scope.collect('view', () => delete this.internal.themes[options.id])\n  }\n}\n\nmarkRaw(cordis.Context.prototype)\nmarkRaw(cordis.EffectScope.prototype)\n", "import { App, defineComponent, h } from 'vue'\nimport { RouterLink } from 'vue-router'\nimport { useContext } from '../context'\n\nconst KActivityLink = defineComponent({\n  props: {\n    id: String,\n  },\n  setup(props, { slots }) {\n    const ctx = useContext()\n    return () => {\n      const activity = ctx.internal.activities[props.id]\n      return h(RouterLink, {\n        to: ctx.internal.routeCache[activity?.id] || activity?.path.replace(/:.+/, ''),\n      }, {\n        default: () => slots.default?.() ?? activity?.name,\n      })\n    }\n  },\n})\n\nexport default function (app: App) {\n  app.component('k-activity-link', KActivityLink)\n}\n", "import { useContext } from '../context'\nimport { App, Component, defineComponent, h } from 'vue'\n\nexport interface SlotItem {\n  order?: number\n  component: Component\n}\n\nexport interface SlotOptions extends SlotItem {\n  type: string\n  /** @deprecated */\n  when?: () => boolean\n  disabled?: () => boolean\n}\n\nexport const KSlot = defineComponent({\n  props: {\n    name: String,\n    data: Object,\n    single: Boolean,\n  },\n  setup(props, { slots }) {\n    const ctx = useContext()\n    return () => {\n      const internal = props.single ? [] : [...slots.default?.() || []]\n        .filter(node => node.type === KSlotItem)\n        .map(node => ({ node, order: node.props?.order || 0 }))\n      const external = [...ctx.internal.views[props.name] || []]\n        .filter(item => !item.disabled?.())\n        .map(item => ({\n          node: h(item.component, { data: props.data, ...props.data }, slots),\n          order: item.order,\n          layer: 1,\n        }))\n      const children = [...internal, ...external].sort((a, b) => b.order - a.order)\n      if (props.single) {\n        return children[0]?.node || slots.default?.()\n      }\n      return children.map(item => item.node)\n    }\n  },\n})\n\nconst KSlotItem = defineComponent({\n  props: {\n    order: Number,\n  },\n  setup(props, { slots }) {\n    return () => slots.default?.()\n  },\n})\n\nfunction defineSlotComponent(name: string) {\n  return defineComponent({\n    inheritAttrs: false,\n    setup(_, { slots, attrs }) {\n      return () => h(KSlot, { name, data: attrs, single: true }, slots)\n    },\n  })\n}\n\nexport default (app: App) => {\n  app.component('k-slot', KSlot)\n  app.component('k-slot-item', KSlotItem)\n  app.component('k-layout', defineSlotComponent('layout'))\n  app.component('k-status', defineSlotComponent('status'))\n}\n", "import { createRouter, createWebHistory, START_LOCATION } from 'vue-router'\nimport { global } from './data'\nimport install, { Dict } from './components'\nimport Overlay from './components/chat/overlay.vue'\nimport { config } from './config'\nimport { initTask } from './loader'\nimport { Context, routeCache } from './context'\nimport { createI18n } from 'vue-i18n'\nimport { watchEffect } from 'vue'\n\ndeclare module '@koishijs/plugin-console' {\n  export interface ClientConfig {\n    messages?: Dict<string>\n    unsupported?: string[]\n  }\n}\n\nexport * as Satori from '@satorijs/protocol'\nexport * as Universal from '@satorijs/protocol'\nexport * from './activity'\nexport * from './components'\nexport * from './config'\nexport * from './context'\nexport * from './loader'\nexport * from './data'\nexport * from './utils'\n\nexport default install\n\nexport interface ActionContext {}\n\nexport interface Config {\n  theme: Config.Theme\n  locale?: string\n}\n\nexport namespace Config {\n  export interface Theme {\n    mode: 'auto' | 'dark' | 'light'\n    dark: string\n    light: string\n  }\n}\n\nexport const root = new Context()\n\nexport const router = createRouter({\n  history: createWebHistory(global.uiPath),\n  linkActiveClass: 'active',\n  routes: [],\n})\n\nrouter.afterEach((route) => {\n  const { name, fullPath } = router.currentRoute.value\n  routeCache[name] = fullPath\n  if (route.meta.activity) {\n    document.title = `${route.meta.activity.name} | ${global.messages?.title || 'Koishi 控制台'}`\n  }\n})\n\nexport const i18n = createI18n({\n  legacy: false,\n  fallbackLocale: 'zh-CN',\n})\n\nwatchEffect(() => {\n  i18n.global.locale.value = config.value.locale\n})\n\nroot.app.use(install)\nroot.app.use(i18n)\nroot.app.use(router)\n\nroot.slot({\n  type: 'global',\n  component: Overlay,\n})\n\nroot.on('activity', data => !data)\n\nrouter.beforeEach(async (to, from) => {\n  if (to.matched.length) return\n\n  if (from === START_LOCATION) {\n    await initTask\n    to = router.resolve(to)\n    if (to.matched.length) return to\n  }\n\n  return {\n    path: '/',\n    query: { redirect: to.fullPath },\n  }\n})\n", "import Element from '@satorijs/element'\nimport { Dict } from 'cosmokit'\n\nexport interface SendOptions {\n  linkPreview?: boolean\n}\n\nexport interface Field {\n  name: string\n}\n\nfunction Field(name: string): Field {\n  return { name }\n}\n\nexport interface Method {\n  name: string\n  fields: Field[]\n}\n\nfunction Method(name: string, fields: string[]): Method {\n  return { name, fields: fields.map(Field) }\n}\n\nexport const Methods: Dict<Method> = {\n  'channel.get': Method('getChannel', ['channel_id', 'guild_id']),\n  'channel.list': Method('getChannelList', ['guild_id', 'next']),\n  'channel.create': Method('createChannel', ['guild_id', 'data']),\n  'channel.update': Method('updateChannel', ['channel_id', 'data']),\n  'channel.delete': Method('deleteChannel', ['channel_id']),\n  'channel.mute': Method('muteChannel', ['channel_id', 'guild_id', 'enable']),\n\n  'message.create': Method('createMessage', ['channel_id', 'content']),\n  'message.update': Method('editMessage', ['channel_id', 'message_id', 'content']),\n  'message.delete': Method('deleteMessage', ['channel_id', 'message_id']),\n  'message.get': Method('getMessage', ['channel_id', 'message_id']),\n  'message.list': Method('getMessageList', ['channel_id', 'next']),\n\n  'reaction.create': Method('createReaction', ['channel_id', 'message_id', 'emoji']),\n  'reaction.delete': Method('deleteReaction', ['channel_id', 'message_id', 'emoji', 'user_id']),\n  'reaction.clear': Method('clearReaction', ['channel_id', 'message_id', 'emoji']),\n  'reaction.list': Method('getReactionList', ['channel_id', 'message_id', 'emoji', 'next']),\n\n  'guild.get': Method('getGuild', ['guild_id']),\n  'guild.list': Method('getGuildList', ['next']),\n\n  'guild.member.get': Method('getGuildMember', ['guild_id', 'user_id']),\n  'guild.member.list': Method('getGuildMemberList', ['guild_id', 'next']),\n  'guild.member.kick': Method('kickGuildMember', ['guild_id', 'user_id', 'permanent']),\n  'guild.member.mute': Method('muteGuildMember', ['guild_id', 'user_id', 'duration', 'reason']),\n  'guild.member.role.set': Method('setGuildMemberRole', ['guild_id', 'user_id', 'role_id']),\n  'guild.member.role.unset': Method('unsetGuildMemberRole', ['guild_id', 'user_id', 'role_id']),\n\n  'guild.role.list': Method('getGuildRoleList', ['guild_id', 'next']),\n  'guild.role.create': Method('createGuildRole', ['guild_id', 'data']),\n  'guild.role.update': Method('updateGuildRole', ['guild_id', 'role_id', 'data']),\n  'guild.role.delete': Method('deleteGuildRole', ['guild_id', 'role_id']),\n\n  'login.get': Method('getLogin', []),\n  'user.get': Method('getUser', ['user_id']),\n  'user.channel.create': Method('createDirectChannel', ['user_id', 'guild_id']),\n  'friend.list': Method('getFriendList', ['next']),\n  'friend.delete': Method('deleteFriend', ['user_id']),\n\n  'friend.approve': Method('handleFriendRequest', ['message_id', 'approve', 'comment']),\n  'guild.approve': Method('handleGuildRequest', ['message_id', 'approve', 'comment']),\n  'guild.member.approve': Method('handleGuildMemberRequest', ['message_id', 'approve', 'comment']),\n}\n\nexport interface List<T> {\n  data: T[]\n  next?: string\n}\n\nexport interface Methods {\n  // message\n  createMessage(channelId: string, content: Element.Fragment, guildId?: string, options?: SendOptions): Promise<Message[]>\n  sendMessage(channelId: string, content: Element.Fragment, guildId?: string, options?: SendOptions): Promise<string[]>\n  sendPrivateMessage(userId: string, content: Element.Fragment, guildId?: string, options?: SendOptions): Promise<string[]>\n  getMessage(channelId: string, messageId: string): Promise<Message>\n  getMessageList(channelId: string, next?: string): Promise<List<Message>>\n  getMessageIter(channelId: string): AsyncIterable<Message>\n  editMessage(channelId: string, messageId: string, content: Element.Fragment): Promise<void>\n  deleteMessage(channelId: string, messageId: string): Promise<void>\n\n  // reaction\n  createReaction(channelId: string, messageId: string, emoji: string): Promise<void>\n  deleteReaction(channelId: string, messageId: string, emoji: string, userId?: string): Promise<void>\n  clearReaction(channelId: string, messageId: string, emoji?: string): Promise<void>\n  getReactionList(channelId: string, messageId: string, emoji: string, next?: string): Promise<List<User>>\n  getReactionIter(channelId: string, messageId: string, emoji: string): AsyncIterable<User>\n\n  // user\n  getLogin(): Promise<Login>\n  getUser(userId: string, guildId?: string): Promise<User>\n  getFriendList(next?: string): Promise<List<User>>\n  getFriendIter(): AsyncIterable<User>\n  deleteFriend(userId: string): Promise<void>\n\n  // guild\n  getGuild(guildId: string): Promise<Guild>\n  getGuildList(next?: string): Promise<List<Guild>>\n  getGuildIter(): AsyncIterable<Guild>\n\n  // guild member\n  getGuildMember(guildId: string, userId: string): Promise<GuildMember>\n  getGuildMemberList(guildId: string, next?: string): Promise<List<GuildMember>>\n  getGuildMemberIter(guildId: string): AsyncIterable<GuildMember>\n  kickGuildMember(guildId: string, userId: string, permanent?: boolean): Promise<void>\n  muteGuildMember(guildId: string, userId: string, duration: number, reason?: string): Promise<void>\n\n  // role\n  setGuildMemberRole(guildId: string, userId: string, roleId: string): Promise<void>\n  unsetGuildMemberRole(guildId: string, userId: string, roleId: string): Promise<void>\n  getGuildRoleList(guildId: string, next?: string): Promise<List<GuildRole>>\n  getGuildRoleIter(guildId: string): AsyncIterable<GuildRole>\n  createGuildRole(guildId: string, data: Partial<GuildRole>): Promise<GuildRole>\n  updateGuildRole(guildId: string, roleId: string, data: Partial<GuildRole>): Promise<void>\n  deleteGuildRole(guildId: string, roleId: string): Promise<void>\n\n  // channel\n  getChannel(channelId: string, guildId?: string): Promise<Channel>\n  getChannelList(guildId: string, next?: string): Promise<List<Channel>>\n  getChannelIter(guildId: string): AsyncIterable<Channel>\n  createDirectChannel(userId: string, guildId?: string): Promise<Channel>\n  createChannel(guildId: string, data: Partial<Channel>): Promise<Channel>\n  updateChannel(channelId: string, data: Partial<Channel>): Promise<void>\n  deleteChannel(channelId: string): Promise<void>\n  muteChannel(channelId: string, guildId?: string, enable?: boolean): Promise<void>\n\n  // request\n  handleFriendRequest(messageId: string, approve: boolean, comment?: string): Promise<void>\n  handleGuildRequest(messageId: string, approve: boolean, comment?: string): Promise<void>\n  handleGuildMemberRequest(messageId: string, approve: boolean, comment?: string): Promise<void>\n\n  // commands\n  updateCommands(commands: Command[]): Promise<void>\n}\n\nexport interface Channel {\n  id: string\n  type: Channel.Type\n  name?: string\n  parentId?: string\n}\n\nexport namespace Channel {\n  export const enum Type {\n    TEXT = 0,\n    DIRECT = 1,\n    VOICE = 2,\n    CATEGORY = 3,\n  }\n}\n\nexport interface Guild {\n  id: string\n  name?: string\n  avatar?: string\n}\n\nexport interface GuildRole {\n  id: string\n  name: string\n  color: number\n  position: number\n  permissions: bigint\n  hoist: boolean\n  mentionable: boolean\n}\n\nexport interface User {\n  id: string\n  name?: string\n  nick?: string\n  /** @deprecated */\n  userId?: string\n  /** @deprecated */\n  username?: string\n  /** @deprecated */\n  nickname?: string\n  avatar?: string\n  discriminator?: string\n  isBot?: boolean\n}\n\nexport interface GuildMember {\n  user?: User\n  name?: string\n  nick?: string\n  avatar?: string\n  title?: string\n  roles?: string[]\n  joinedAt?: number\n}\n\nexport interface Login {\n  user?: User\n  platform?: string\n  selfId?: string\n  status: Status\n}\n\nexport const enum Status {\n  OFFLINE = 0,\n  ONLINE = 1,\n  CONNECT = 2,\n  DISCONNECT = 3,\n  RECONNECT = 4,\n}\n\nexport interface Message {\n  id?: string\n  /** @deprecated */\n  messageId?: string\n  channel?: Channel\n  guild?: Guild\n  user?: User\n  member?: GuildMember\n  content?: string\n  elements?: Element[]\n  timestamp?: number\n  quote?: Message\n  createdAt?: number\n  updatedAt?: number\n}\n\nexport interface Button {\n  id: string\n}\n\nexport interface Command {\n  name: string\n  description: Dict<string>\n  arguments: Command.Declaration[]\n  options: Command.Declaration[]\n  children: Command[]\n}\n\nexport namespace Command {\n  export interface Declaration {\n    name: string\n    description: Dict<string>\n    type: string\n    required: boolean\n  }\n}\n\nexport interface Argv {\n  name: string\n  arguments: any[]\n  options: Dict\n}\n\ntype Genres = 'friend' | 'channel' | 'guild' | 'guild-member' | 'guild-role' | 'guild-file' | 'guild-emoji'\ntype Actions = 'added' | 'deleted' | 'updated'\n\nexport type EventName =\n  | `${Genres}-${Actions}`\n  | 'message'\n  | 'message-deleted'\n  | 'message-updated'\n  | 'message-pinned'\n  | 'message-unpinned'\n  | 'interaction/command'\n  | 'reaction-added'\n  | 'reaction-deleted'\n  | 'reaction-deleted/one'\n  | 'reaction-deleted/all'\n  | 'reaction-deleted/emoji'\n  | 'send'\n  | 'friend-request'\n  | 'guild-request'\n  | 'guild-member-request'\n\nexport interface Event {\n  id: number\n  type: string\n  selfId: string\n  platform: string\n  timestamp: number\n  argv?: Argv\n  channel?: Channel\n  guild?: Guild\n  login?: Login\n  member?: GuildMember\n  message?: Message\n  operator?: User\n  role?: GuildRole\n  user?: User\n  button?: Button\n  _type?: string\n  _data?: any\n  /** @deprecated */\n  subtype?: string\n  /** @deprecated */\n  subsubtype?: string\n}\n\nexport type MessageLike = Message | Event\n\nexport const enum Opcode {\n  EVENT = 0,\n  PING = 1,\n  PONG = 2,\n  IDENTIFY = 3,\n  READY = 4,\n}\n\nexport interface GatewayPayloadStructure<O extends Opcode> {\n  op: O\n  body: GatewayBody[O]\n}\n\nexport type ServerPayload = {\n  [O in Opcode]: GatewayPayloadStructure<O>\n}[Opcode.EVENT | Opcode.PONG | Opcode.READY]\n\nexport type ClientPayload = {\n  [O in Opcode]: GatewayPayloadStructure<O>\n}[Opcode.PING | Opcode.IDENTIFY]\n\nexport interface GatewayBody {\n  [Opcode.EVENT]: Event\n  [Opcode.PING]: {}\n  [Opcode.PONG]: {}\n  [Opcode.IDENTIFY]: {\n    token?: string\n    sequence?: number\n  }\n  [Opcode.READY]: {\n    logins: Login[]\n  }\n}\n\nexport namespace WebSocket {\n  /** The connection is not yet open. */\n  export const CONNECTING = 0\n  /** The connection is open and ready to communicate. */\n  export const OPEN = 1\n  /** The connection is in the process of closing. */\n  export const CLOSING = 2\n  /** The connection is closed. */\n  export const CLOSED = 3\n\n  export type ReadyState =\n    | typeof CONNECTING\n    | typeof OPEN\n    | typeof CLOSING\n    | typeof CLOSED\n\n  export interface EventMap {\n    open: Event\n    error: Event\n    message: MessageEvent\n    close: CloseEvent\n  }\n\n  export interface EventListener {\n    (event: Event): void\n  }\n\n  export interface Event {\n    type: string\n    target: WebSocket\n  }\n\n  export interface CloseEvent extends Event {\n    code: number\n    reason: string\n  }\n\n  export interface MessageEvent extends Event {\n    data: string\n  }\n}\n\nexport interface WebSocket {\n  readonly url?: string\n  readonly protocol?: string\n  readonly readyState?: WebSocket.ReadyState\n  close(code?: number, reason?: string): void\n  send(data: string): void\n  dispatchEvent?(event: any): boolean\n  addEventListener<K extends keyof WebSocket.EventMap>(type: K, listener: (event: WebSocket.EventMap[K]) => void): void\n  removeEventListener<K extends keyof WebSocket.EventMap>(type: K, listener: (event: WebSocket.EventMap[K]) => void): void\n}\n", "import { defineComponent, h, resolveComponent } from 'vue'\nimport { Console } from '@koishijs/plugin-console'\nimport { isNullable } from 'cosmokit'\nimport { Store, store } from './data'\n\nexport type Field = keyof Console.Services\n\nexport namespace Card {\n  export function create(render: Function, fields: readonly Field[] = []) {\n    return defineComponent({\n      render: () => fields.every(key => store[key]) ? render() : null,\n    })\n  }\n\n  export interface NumericOptions {\n    icon: string\n    title: string\n    type?: string\n    fields?: Field[]\n    content: (store: Store) => any\n  }\n\n  export function numeric({ type, icon, fields, title, content }: NumericOptions) {\n    if (!type) {\n      return defineComponent(() => () => {\n        if (!fields.every(key => store[key])) return\n        return h(resolveComponent('k-numeric'), { icon, title }, () => content(store))\n      })\n    }\n\n    return defineComponent(() => () => {\n      if (!fields.every(key => store[key])) return\n      let value = content(store)\n      if (isNullable(value)) return\n      if (type === 'size') {\n        if (value >= (1 << 20) * 1000) {\n          value = (value / (1 << 30)).toFixed(1) + ' GB'\n        } else if (value >= (1 << 10) * 1000) {\n          value = (value / (1 << 20)).toFixed(1) + ' MB'\n        } else {\n          value = (value / (1 << 10)).toFixed(1) + ' KB'\n        }\n      }\n      return h(resolveComponent('k-numeric'), { icon, title }, () => [value])\n    })\n  }\n}\n"],
  "mappings": "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",
  "names": ["sanitize", "html", "src_default", "__name", "root", "_a", "config", "defineProperty", "remove", "hasUpdate", "registry", "inject", "name", "isNullable", "location", "toValue", "_a", "mode", "root", "Service", "config", "mode", "Context", "_a", "_a", "_a", "src_default", "Field", "__name", "Channel", "Type", "Status", "Opcode", "WebSocket", "Card", "client_default", "Context", "_a"]
}
